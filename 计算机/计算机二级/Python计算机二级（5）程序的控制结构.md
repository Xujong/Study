# Python计算机二级（五）程序的控制结构

## 程序的三种控制结构

### 程序流程图

一种表达程序控制结构的方式，由一系列图形、流程线和文字说明组成

用于关键部分的程序分析和过程描述

| 图形         | 描述                               |
| ------------ | ---------------------------------- |
| 椭圆框       | 起止框：程序的开始和结束           |
| 矩形框       | 处理框：处理内容                   |
| 菱形框       | 判断框：判断条件，结果不同路径不同 |
| 平行四边形框 | 输入输出框：数据输入，结果输出     |
| 大中括号     | 注释框                             |
| 带箭头的线   | 流向线：表示程序运行的路径         |
| 椭圆线       | 连接点：表示多个流程图的连接方式   |

**流程图表示的优点：直观，易于理解**

### 程序控制结构基础

程序的三种结构：

顺序结构：线性执行的结构，即由从前到后的顺序执行

分支结构：程序按照不同的判断条件选择不同的方向执行

循环结构：程序根据条件判断结果决定是重复执行代码还是向下执行

扩展的结构：break和continue

​	break：结束当前循环，继续向下执行代码

​	continue：结束本次循环，开始下一次循环

## 程序的分支结构

### 单分支结构

语法：

```python
if 条件:	# 判断是否符合条件
    语句块	# 若符合条件，执行语句块中的程序
```

条件产生的是True或者False，True时执行，False时跳过

语句块可以是一个语句，也可以是多个

多个条件的判断：

```python
if 条件1 and 条件2 and ... # “与”，同时满足多个条件
if 条件1 or 条件2 or ... # “或”，满足其中一个条件
```

### 双分支结构

语法：

```python
if 条件: # 判断是否符合条件
    语句块1 # 符合条件执行语句块1
else:
    语句块2 # 不符合条件执行语句块2
```

条件表达式：

```python
表达式1 if 条件 else 表达式2 # 这里使用表达式实现相同的功能
# 例子：
s=eval(input())
result='a' if s == 0 else 'b'
```

**表达式和语句的区别：**表达式是产生或计算新数据值的代码片段，并不是完整语句

### 多分支结构

语法：

```python
if 条件1:
    语句块1 # 符合条件1时执行并退出分支
elif 条件2:
    语句块2 # 不符合条件1而符合条件2时执行并退出分支
...
else:
    语句块n # 以上条件均不符合，执行并退出分支
```

各个条件按顺序执行，顺次验证，直到出现判断为True时执行

else可选，可以不加

**编程时要注意先后顺序，不要在没有达到预期条件时先通过其他条件的验证**

### 判断条件及组合

判断条件的形成：使用判断操作符

| 操作符 | 操作符含义 |
| ------ | ---------- |
| <      | 小于       |
| <=     | 小于等于   |
| >=     | 大于等于   |
| >      | 大于       |
| ==     | 等于       |
| !=     | 不等于     |

使用not，and和or进行逻辑运算和组合，其中：

not：“否”，不符合此条件

多个条件之间使用小括号进行组合

## 程序的循环结构

### 遍历循环for

语法：

```python
for 循环变量 in 遍历结构:
	语句块
```

遍历循环：从遍历结构中逐一提取元素，放在循环变量中，对于每个所提取的元素执行一次语句块。

执行次数根据遍历结构元素个数确定，遍历结构可以是任何可能的类型

使用range()遍历：

```python
for i in range(j): # 从0到j-1循环
    print(i)
for i in range(j,k): # 从j到k-1循环
    print(i)
```

for-else结构：当循环正常执行，没有遇到break中止时，执行else内容表示程序正常运行：

```python
for i in range(j):
    print(i)
else:
    print('Succeed!')
```

### 无限循环while

有类似if的判断条件，但此处的判断条件的意义是：若循环后符合条件，则继续下一次循环，否则结束循环，向后执行代码。

使用while可以实现无限循环

语法：

```python
while 条件:
    语句块
```

示例：

```python
n=0
while n < 10:
    n += 3

# 执行过程
n=0
第一次判断：n=0<10，True
n=n+3=3
第二次判断：n=3<10，True
n=n+3=6
第三次判断：n=6<10，True
n=n+3=9
第四次判断：n=9<10，True
n=n+3=12
第五次判断：n=12>10，False，结束循环
```

如果在程序中，判断条件的值不会改变，例如上面的n在每次运行代码块之后不变，就会进入死循环，也就是循环不会停止。因此在使用while时，一定要加入使循环能够停止的条件！

**while-else循环：循环成功且未被break结束时，执行else**

```python
n = 0
while n < 10:
    print(n)
    n += 3
else:
    print('Succeed！') # 程序正常退出，执行
```

### 循环控制符

#### break跳出

作用：跳出当前for或while循环，返回上一层循环继续执行

```python
while True:
    s=input('请输入姓名，或输入Q退出')
    if s == 'Q':
        break
    print(s)
```

多层循环时，break只向上跳出最近的一层循环，即：

循环1{循环2{循环3{break}}}，只跳出本次循环3

循环1{循环2{break循环3{}}}，这样只跳出循环2

#### continue结束当次循环

用于结束当次循环，即不继续执行本次循环接下来的代码，重新开始本循环，不会终止整个循环

而且，程序中有continue，else语句还会执行，而break跳出后不会执行else。

## 异常处理

当你在写程序的时候，你永远无法预知用户会有什么样的离谱操作，因此python有一个异常处理语句try-except，用于当程序出错的时候提供替代方案。

一般用于输入或者关键代码部分。

语法;

```python
try:
	正常处理
except 错误类型:
	替代处理
```

比如当要求用户输入数字时，可能会出现用户输入的并不是一个数字，eval()可能会出错，所以可以使用异常处理，如：

```pyhon
try:
    aaa = eval(input('请输入一个数字'))
    print(aaa)
except NameError:
    print('只能输入数字，请检查')
```

这里的错误类型是NameError，因此在except后添加NameError这个单词。

except语句可以有多个，对应不同的错误。

### 程序示例：猜数游戏

#### 基本程序

```python
import random
target = random.randint(1, 1000)
count = 0
while True:
    guess = eval(input('请输入一个猜测的整数（1至1000）'))
    count += 1
    if guess > target:
        print('猜大了')
    elif guess < target:
        print('猜小了')
    else:
        print('猜对了')
        break
print('此轮的猜测次数是：', count)
```

#### 异常处理

```python
import random
target = random.randint(1, 1000)
count = 0
while True:
    try:
        guess = eval(input('请输入一个猜测的整数（1至1000）'))
    except NameError:
        print('应输入整数，请检查！')
        cont
    count += 1
    if guess > target:
        print('猜大了')
    elif guess < target:
        print('猜小了')
    else:
        print('猜对了')
        break
print('此轮的猜测次数是：', count)
```

