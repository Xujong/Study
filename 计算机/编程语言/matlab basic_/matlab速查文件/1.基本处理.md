# 基本处理方法

## 数据类型

### 数值类型

基本类型：整数、浮点数（单精度、双精度）、复数、无穷量、非数值量

默认存储类型：双精度浮点数

#### 整数类型

使用整数时需要转换，转换函数形式：int位数或uint位数

```matlab
int8(12) % 将12以有符号8位整数显示
a=uint32(394) % 将a赋值为无符号32位整数394
```

位数的最大值为64，n位整数范围：有符号-2^n-1^~ 2^n-1^-1，无符号0~ 2^n^-1

取整函数：

| 函数     | 运算法则 |
| -------- | -------- |
| floor(x) | 向下取整 |
| ceil(x)  | 向上取整 |
| round(x) | 四舍五入 |
| fix(x)   | 向0取整  |

#### 浮点数类型

分为单精度和双精度。单精度32位，转换函数single；双精度64位，转换函数double

单精度浮点数不能与整数进行算术运算

eps函数：获取数值与最接近该数值的浮点数之间的间隙

#### 复数

默认使用i或者j作为虚数单位

复数函数：

| 函数          | 说明                       |
| ------------- | -------------------------- |
| real(z)       | 取实部                     |
| abs(z)        | 取模                       |
| conj(z)       | 取共轭复数                 |
| imag(z)       | 取虚部                     |
| angle(z)      | 取辐角                     |
| complex(a, b) | 以a为实部，b为虚部创建复数 |

### 逻辑类型

| 关系操作符 |   说明   |
| :--------: | :------: |
|     <      |   小于   |
|     <=     | 小于等于 |
|     >      |   大于   |
|     >=     | 大于等于 |
|     ==     |   等于   |
|     ~=     |  不等于  |

| 逻辑运算符和函数 |           说明           |
| :--------------: | :----------------------: |
|        &         |            与            |
|        \|        |            或            |
|        ~         |            非            |
|    xor(x, y)     |      x和y的异或运算      |
|      any(x)      | 判断是否为零向量或零矩阵 |

| 测试函数 |      返回真值条件      |
| :------: | :--------------------: |
| isfinite |        元素有限        |
| isempty  |        参量为空        |
| isglobal |   参量是一个全局变量   |
|  ishold  |     绘图状态为“ON”     |
|  isiece  | 计算机执行IEEE算术计算 |
|  isinf   |      元素为无穷大      |
| isletter |       元素为字母       |
|  isnan   |      元素为不定值      |
|  isreal  |       参量无虚部       |
| isspace  |     元素为空格字符     |
|  isstr   |    参量为一个字符串    |

### 字符和字符串

字符串的连接通过直接连接两个字符串数组来实现;

```matlab
U ='Hello,';
W =' world!';
W=[U V]
```

### 函数句柄

#### 调用函数的方法

##### 直接调用

被调用的函数称为子函数，只能被与七M文件同名的主函数或在M文件中的其他函数调用

##### 使用函数句柄的间接调用

可以通过函数句柄来实现对函数的调用：

```matlab
Functoin_Handle = @Functoin_Filename
% Functon_Filename即函数文件名
Function_Handle = @(Var1, Var2, ..., Varn) Function
% 使用括号里的参数创建Function
```

#### 函数句柄操作方法

|             函数名称             |                     功能                      |
| :------------------------------: | :-------------------------------------------: |
|       functions(funhandle)       | 返回存储函数名称、类型和M文件位置的**结构体** |
|       func2str(funhandle)        |          将句柄转化为函数名称字符串           |
|          str2func(str)           |         将字符串代表队函数转化为句柄          |
|   save filename.mat funhandle    |            将句柄保存在*.mat文件中            |
|   load filename.mat funhandle    |    把*.mat文件中存储的函数句柄加载到工作区    |
|   isa(var, 'function-handle')    |             检查var是否是函数句柄             |
| isequal(funhandlesA, funhandleB) |      检测两个函数句柄是否对应同一个函数       |

### 结构体类型

#### 创建方法

##### 字段赋值创建。

```matlab
StructName.fieldN = Value
```

##### 利用struct函数创建结构体

```matlab
StrArray = struct('field1', var1, 'field2', var2,..., 'fieldN', varN)
```

### 数组类型

#### 创建方法

```matlab
Array = [var1 var2 var3 ... varN]
Array = i : k % 从i开始，步长为1，到k结束的数字序列
Array = i : j : k % 从i开始，步长为j，到k结束的数字序列
Array = linspace(a, b, n) % 在区间[a,b]上创建一个含有n个数据的线性数组
```

### 单元数组类型

#### 创建

##### 使用赋值语句

```matlab
cellName = {Array1, Array2,..., ArrayN}
% 使用“,”分隔，使用“;”来分行
```

##### 使用cell函数

```matlab
cellName = cell(m, n)
% 创建一个mxn的空单元数组，每一个单元都为空矩阵
```

#### 寻访

1.单元外标识：C(m,n)，指第m行第n列的单元

2.单元内编址：C{m,n}，指第m行第n列的单元中的内容

#### 操作

##### 合并单元数组

举例：

```matlab
a{1,1} = 'cellclass';
a{1,2} = [1 2 2];
a{2,1} = ['a', 'b', 'c']
a{2,2} = [9 5 6]
% 使用直接赋值的方法合并单元数组
```

##### 删除单元：将空矩阵赋给单元

##### 改变单元数组的形状：reshape函数

```matlab
trimC = reshape(C, M, N)
% 表示将单元数组C改变成一个具有M行N列的单元数组
```

### map容器类型

#### map类

map类的对象有三种属性：

| 属性      | 说明                             | 默认值 |
| --------- | -------------------------------- | ------ |
| Count     | 无符号64位整数，表示键值对的总数 | 0      |
| KeyType   | 字符串，map对象中的key的类型     | char   |
| ValueType | 字符串，map对象中的value的类型   | any    |

#### 创建map对象

使用构造函数来创建：

```matlab
mapObj = containers.Map({key1, key2,...}, {val1, val2,...}) % 值是一般类型
mapObj = containers.Map({'key1', 'key2',...}, {val1, val2,...}) % 值是字符串时
```

#### 查看、读取

1.查看：使用keys查看所有键，使用values查看所有值

```matlab
keys(schedulemap)
values(shcedulmap)
```

2.读取

```matlab
valueName = mapName(keyName)
% 当键名是字符串时，用单引号标识keyName
values(schedulemap, {'Monday', 'Thursday'})
```

#### 编辑map对象

1.删除键值对

```matlab
remove('mapName', 'keyName')
```

2.添加键值对

```matlab
existingMapObj(newKeyName) = newValue
% existingMapObj指map对象名
```

3.单独修改键名：先删除键和对应的值，然后添加新条目

4.单独修改值：通过赋值修改

## 基本矩阵操作

### 矩阵的构造

#### 直接建立矩阵

按照矩阵的形式填入数据。其中矩阵用方括号“[]”表示，一行内使用“,”分隔，行间采用“;”分隔

```matlab
A = [2,3,4;
	5,6,7;
	8,9,0]
```

#### 建立特殊矩阵

| 函数               | 功能                                                         |
| ------------------ | ------------------------------------------------------------ |
| ones(n)            | n阶1矩阵                                                     |
| ones(m, n,..., p)  | mxnx...xp的1矩阵                                             |
| ones(size(A))      | 和矩阵A同样大小的1矩阵                                       |
| zeros(n)           | n阶0矩阵                                                     |
| zeros(m, n,..., p) | mxnx...xp的0矩阵                                             |
| zeros(size(A))     | 和矩阵A同样大小的0矩阵                                       |
| eye(n)             | n阶单位矩阵                                                  |
| eye(m, n)          | mxn的单位矩阵                                                |
| eye(size(A))       | 和矩阵A同样大小的单位矩阵                                    |
| magic(n)           | 每行每列元素之和都相等的n阶矩阵                              |
| rand(n)            | 元素为0~1的均匀分布的随机数的n阶矩阵                         |
| rand(m, n,..., p)  | 元素为0~1的均匀分布的随机数的nxmx...xp矩阵                   |
| randn(n)           | 元素为0均值、单位方差的正态分布随机数的n阶矩阵               |
| randn(m, n,..., p) | 元素为0均值、单位方差的正态分布随机数的nxmx...xp矩阵         |
| diag(x)            | n阶矩阵，其主对角线元素取自向量x，其余均为0                  |
| diag(A, k)         | 由矩阵A第k条对角线的元素组成的列向量（其中k=0为主对角线；k<0为下第k条对角线；k>0为上第k条对角线） |
| diag(x, k)         | （n+\|k\|)阶矩阵，第k条对角线元素取自向量x，其余均为0        |
| triu(A)            | 以A中元素构建上三角矩阵                                      |
| triu(A, k)         | 以A中元素构建k条对角线以上的上三角矩阵                       |
| tril(A)            | 以A中元素构建下三角矩阵                                      |
| tril(A, k)         | 以A中元素构建k条对角线以下的下三角矩阵                       |

### 矩阵大小及结构的改变

| 函数名称              | 功能                                                         |
| --------------------- | ------------------------------------------------------------ |
| filplr(A)             | 矩阵每一行均进行逆序排列                                     |
| flipud(A)             | 矩阵每一列均进行逆序排列                                     |
| flipdim(A, dim)       | 生成在dim维矩阵A内的元素交换位置的多维矩阵                   |
| rot90(A)              | 生成由矩阵A正转$90^\circ$的新矩阵                            |
| rot90(A, k)           | 生成由矩阵A正转$k\times90^\circ$得到的新矩阵                 |
| reshape(A, m, n)      | 生成一个元素以线性索引的顺序从矩阵A中取得的$m{\times}n$的矩阵 |
| repmat(A, [m n...p])  | 和矩阵A有相同元素的$m{\times}n{\times}...{\times}p$块的多维矩阵 |
| shiftdim(A, n)        | 列移动n步。左正右负                                          |
| squeeze(A)            | 返回没有空维的矩阵                                           |
| cat(dim, A, B)        | 将矩阵A和B组合为一个dim维的多维矩阵                          |
| permute(A, order)     | 根据向量order来改变矩阵A中的维数顺序                         |
| ipermute(A, order)    | 进行命令permute的逆变换                                      |
| sort(A)               | 对矩阵按列升序排序。一维矩阵直接排序                         |
| sort(A, dim)          | 对矩阵按制定的方向升序排序（dim=1，对列排序；dim=2，对行排序） |
| sort(A, dim, mode)    | mode='ascend'为升序，mode='descend'为降序                    |
| [B, IX] = sort(A,...) | IX为排序后备元素在原矩阵中的行位置或列位置的索引             |

### 矩阵下标引用

#### 访问单个矩阵元素

| 表达式                              | 含义                                                    |
| ----------------------------------- | ------------------------------------------------------- |
| A(n)                                | 返回总第n个元素                                         |
| A(i, j)                             | 返回第i行第j个元素，:表示取行或列的所有坐标             |
| A(i:j, k:m)                         | 返回第i行到第j行与第k列到第m列围成的矩阵，可用:取整行列 |
| A(:)                                | 将A中的每列合并成一个列向量                             |
| A(j:k)                              | A中总第j个到第k个向量                                   |
| A([j~1~ j~2~ ...])                  | 返回第j~1~列、第j~2~列等组成的行向量                    |
| A([i~1~ i~2~ ...], [j~1~ j~2~ ...]) | 返回第i~1~、i~2~行等和第j~1~、j~2~列等的元素            |

#### 线性引用矩阵元素

```matlab
IND = sun2ind(siz, i, j) % 将双下标索引转换为单下标
% siz ---- 待转换坐标所在的矩阵行列数，一般使用size(A)
% i j ---- 双下标索引的行和列
[I J] = ind2sub(siz, ind) % 将单下标索引转换为双下标
```

### 矩阵信息的获取

#### 矩阵结构

| 函数名称    | 判断内容                             |
| ----------- | ------------------------------------ |
| isempty(A)  | 矩阵为空                             |
| isscalar(A) | 矩阵是单元素的标量矩阵               |
| isvector(A) | 矩阵是只具有一行或一列元素的一维向量 |
| issparse(A) | 数组是稀疏矩阵                       |

#### 矩阵大小

| 函数             | 功能                 |
| ---------------- | -------------------- |
| n = dims(X)      | 获取矩阵维数         |
| [m, n] = size(X) | 获取矩阵各维的长度   |
| n = length(X)    | 获取矩阵最长维的长度 |
| n = numel(X)     | 获取矩阵元素的个数   |

#### 矩阵维度

计算函数：ndims(矩阵元素)

#### 矩阵元素类型测试

| 函数名称  | 检查内容：是否   |
| --------- | ---------------- |
| isnumeric | 数值型变量       |
| isreal    | 实数数值型变量   |
| isfloat   | 浮点数值型变量   |
| isinteger | 整数型变量       |
| islogical | 逻辑型变量       |
| ischar    | 字符型变量       |
| isstruct  | 结构体变量       |
| iscell    | 元胞型变量       |
| iscellstr | 结构体元胞型变量 |

#### 矩阵占用内存

使用who和whos

### 矩阵的保存和加载

#### 合并函数

| 函数               | 功能                                    |
| ------------------ | --------------------------------------- |
| cat(DIM,A,B)       | DIM维上合并A和B（DIM=1为行，DIM=2为列） |
| horzcat(A,B)       | 在水平方向上合并矩阵A和B                |
| vertcat(A,B)       | 在竖直方向上合并矩阵A和B                |
| B=repmat(A,M,N)    | 复制M$\times$N个A构造新的矩阵           |
| Y=blkdiag(A,B,...) | 已知矩阵构造对角化矩阵                  |

## 运算函数

### 基本函数

| 函数       | 运算法则       |
| ---------- | -------------- |
| exp(x)     | $e^x$          |
| log(x)     | $lnx$          |
| log10(x)   | $lgx$          |
| sqrt(x)    | $\sqrt{x}$     |
| sin(x)     | $sin x$        |
| cos(x)     | $cosx$         |
| tan(x)     | $tanx$         |
| asin(x)    | $arcsinx$      |
| acos(x)    | $arccosx$      |
| atan(x)    | $arctanx$      |
| mod(a,b)   | a与b取余       |
| min(a,b)   | 取最小值       |
| max(a,b)   | 取最大值       |
| mean(x)    | 取平均值       |
| median(x)  | 取中位数       |
| sum(x)     | $\sum{x}$      |
| prod(x)    | $\prod{x}$     |
| cumsum(x)  | 累积求和       |
| cumprod(x) | 累积连乘       |
| sign(x)    | sgn函数        |
| rem(x,y)   | 求余           |
| diff(x)    | x变量的差分    |
| sort(x)    | 排序           |
| fft(x)     | 离散傅里叶变换 |
| rank(x)    | 取秩           |

### 逻辑运算函数

| 函数     | 运算法则   |
| -------- | ---------- |
| xor(x,y) | 异或       |
| ant(x)   | 存在非零值 |
| all(x)   | 任意非零值 |

## 字符串处理函数

### 基本处理函数

| 函数      | 功能                                           |
| --------- | ---------------------------------------------- |
| eval(str) | 求字符串的值的命令                             |
| blanks(n) | 返回n个0或空格的字符串                         |
| deblank   | 去掉末尾空格                                   |
| feval     | 求字符串给定的函数值                           |
| findstr   | 从一个字符串内找出字符串（除矩阵，大小写敏感） |
| isletter  | 字母存在时返回真值                             |
| isspace   | 空格存在时为真                                 |
| isstr     | 输入字符串时为真                               |
| iasterr   | 返回上一个产生错误的字符串                     |
| strcmp    | 判断字符串相同                                 |
| strrep    | 用一个字符串替换另一个字符串                   |
| strtok    | 从字符串中找出第一个标记                       |
| strvcat   | 纵向连接多个字符串（忽略空字符串并空格补齐）   |
| char      | 纵向连接字符串（包括空字符串）                 |

### 字符串数值转换

| 函数    | 功能                       |
| ------- | -------------------------- |
| abs     | 字符串转换成ASCII码        |
| dec2hex | 十进制数转换十六进制字符串 |
| fprintf | 输出格式化的文本           |
| hex3dec | 十六进制转十进制           |
| int2str | 整数转换为字符串           |
| lower   | 转换纯小写                 |
| num2str | 数字转字符串               |
| setstr  | ASCII转换成字符串          |
| sprintf | 用格式控制数字转换成字符串 |
| sscanf  | 用格式控制字符串转换成数字 |
| str2mat | 字符串转换为文本矩阵       |
| str2num | 字符串转换成数字           |
| upper   | 字符串转换成大写           |





